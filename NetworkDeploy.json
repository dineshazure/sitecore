{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
      "VnetPrefix": {
        "type": "string",
        "defaultvalue":"HLY-",
        "maxLength": 11
      }
    },
    "variables": {
      "firstVnetName": "[concat(parameters('VnetPrefix'),'UKS-UAT-VNET')]",
      "firstVnetPrefix": "10.45.0.0/22",
      "subnetName01": "uatappsubnet",
      "gatewaysubnetprefix": "10.45.0.0/27",
      "subnetName02": "ad1subnet",
      "adsubnetprefix": "10.45.1.0/26",
      "subnetName03": "firewall1subnet",
      "firewallsubnetprefix": "10.45.1.64/26"
    },
    "resources": [
      {
        "apiVersion": "2018-10-01",
        "type": "Microsoft.Network/virtualNetworks",
        "name": "[Variables('firstVnetName')]",
        "location": "[resourceGroup().location]",
        "properties": {
          "addressSpace": {
            "addressPrefixes": [
              "[variables('firstVnetPrefix')]"
            ]
          }
        },
        "resources": [
          {
            "apiVersion": "2018-10-01",
            "type": "subnets",
            "location": "[resourceGroup().location]",
            "name": "[variables('subnetName01')]",
            "dependsOn": [
              "[variables('firstVnetName')]"
            ],
            "properties": {
              "addressPrefix": "[variables('gatewaysubnetprefix')]"
            }
          },
          {
            "apiVersion": "2018-10-01",
            "type": "subnets",
            "location": "[resourceGroup().location]",
            "name": "[variables('subnetName02')]",
            "dependsOn": [
              "[variables('firstVnetName')]",
              "[variables('subnetName01')]"
            ],
            "properties": {
              "addressPrefix": "[variables('adsubnetprefix')]"
            }
          },
          {
            "apiVersion": "2018-10-01",
            "type": "subnets",
            "location": "[resourceGroup().location]",
            "name": "[variables('subnetName03')]",
            "dependsOn": [
              "[variables('firstVnetName')]",
              "[variables('subnetName02')]"
            ],
            "properties": {
              "addressPrefix": "[variables('firewallsubnetprefix')]"
            }
          }
        ]
      }
    ]
  }